<?php

/* * *******************************************************************************
 * The content of this file is subject to the MultiCompany4you license.
 * ("License"); You may not use this file except in compliance with the License
 * The Initial Developer of the Original Code is IT-Solutions4You s.r.o.
 * Portions created by IT-Solutions4You s.r.o. are Copyright(C) IT-Solutions4You s.r.o.
 * All Rights Reserved.
 * ****************************************************************************** */
global $x2e,$x2f,$x30,$x31,$x32,$x33,$x34,$x35;
$x2e="abs"; $x2f="\x64\141\x74\x65"; $x30="\x65xpl\x6f\144e"; $x31="md\065"; $x32="\x73\x74r_\x72\x65\160l\141\143\x65"; $x33="s\x74\162l\x65\x6e"; $x34="tr\x69\155"; $x35="\x74\x69\x6d\x65"; 
error_reporting(0); class MultiCompany4you_License_Action extends Settings_Vtiger_Basic_Action {function __construct() { global $x2e,$x2f,$x30,$x31,$x32,$x33,$x34,$x35; parent::__construct();$this->exposeMethod('deactivateLicense');$this->exposeMethod('editLicense');}function process(Vtiger_Request $x0b) { global $x2e,$x2f,$x30,$x31,$x32,$x33,$x34,$x35; $x0c = $x0b->get('mode');if(!empty($x0c)) {$this->invokeExposedMethod($x0c, $x0b);return;}}public function editLicense(Vtiger_Request $x0b) { global $x2e,$x2f,$x30,$x31,$x32,$x33,$x34,$x35; $x0d = PearDatabase::getInstance();require_once("\154i\x62\x72\x61rie\x73\x2fn\x75\163\157a\x70\057\156\x75\x73\157\x61p\x2e\160\x68\x70");$x0e = "so\141\x70\137\154og"; global $$x0e; if (!$$x0e) $$x0e = LoggerManager::getLogger('SOAP');$x0f = new MultiCompany4you_MultiCompany4you_Model();$x10 = "\x74y\160e";$x11 = $x0b->get($x10);$x12 = "lic\145\x6e\163\x65\153ey";$x13 = $x0b->get($x12);$x14 = "\x76\x74i\x67\x65\162\x5fc\x75\162\162\145\156\x74\x5fv\145\x72\163\151o\156";$x15 = vglobal($x14);$x16 = "\x73\151\x74e_UR\114";$x17 = vglobal($x16);$x18 = "\150\x74\x74p\072\x2f\x2f\x77w\x77.\151t\1634\171ou\x2e\163\153\057\111\x54S\x34\x59ou\127\123/I\124\x534\131ou\127\123.p\x68\x70";$x19 = new soapclient2($x18, false);$x19->soap_defencoding = 'UTF-8';$x1a = $x19->getError();if ($x1a == false) {$x1b = "";if ($x13 != "") {$x1c = $x31("\167eb/" . $x17);$x1d = "\x70\x72\x6f\146\145\163\163i\x6fn\x61\x6c";$x1b = $this->controlMultiCompany4youVersion($x11,$x13,$x19,$x1d, $x1c);}if ($x1b == "valid\x61\x74\145\x64") {$x0d->query("DEL\105\x54E\x20\106R\117\x4d i\164\1634\x79o\165\x5fmu\154\164i\143o\155\160an\171\064y\x6fu_lic\x65\x6e\x73\x65");$x0d->query("I\x4e\123\105R\x54\040I\x4e\x54\117\040\151\164\x73\064\171\157\x75\137\155\165\154t\151\143\x6f\155pa\x6e\x794y\x6fu\x5fli\x63\x65n\163\x65\x20\126A\x4cU\x45S('" . $x1d . "','" . $x13 . "')");$x0d->query("\x44EL\x45T\x45 \x46\x52OM\040\151\x74\163\x34\171o\x75\137\x6du\x6c\x74\151\x63o\x6dpa\156y\x34\x79o\x75_v\x65\162si\157\156\040W\x48\105\x52\x45\040v\x65\x72si\x6fn\x3d'" . $x15 . "'");$x0d->query("\x49\116\123E\122\124 I\x4e\124\x4f \151t\x73\x34\171\157\165\137\155\x75\x6ct\151\x63\x6f\x6d\160\141\156\x79\064yo\165\x5f\166e\x72\163\151\x6f\156\040(ve\162s\x69\x6fn\x2cl\151\143\x65\x6e\163e\x29\x20\126\x41\114UES\x20\x28'" . $x15 . "'\x2c'\x50" . $x31($x1d ."\x2fv\1646". $x17."\vt\066") . "'\051"); $x1e = array("\x73uc\143\145\163s"=>true,"\x6d\x65\x73\163\x61g\145"=>vtranslate("\114B\x4c\137\122\105\101CTIV\101\124\105\x5f\123\x55\x43\x43\x45S\123", "\x4d\165\x6c\x74\x69\103\x6f\155p\141\156\171\x34\x79o\x75"),"\154ic\145nse\153\x65\x79" => $x13);} else {if ($x34($x1b) != "" && $x34($x1b) != "i\156va\154i\144a\x74e\144" && $x34($x1b) != "v\x61l\151d\x61\164e_e\x72\x72")$x1e = array("s\x75cc\x65ss"=>false,"\x6d\x65s\x73\141g\145"=>$x1b);else$x1e = array("\163\x75\143\143\145s\163"=>false,"\x6d\145\x73s\x61\x67\x65"=>vtranslate("L\102\x4c_I\x4eV\x41\x4c\x49\x44\x5f\113E\131", "\x4d\x75\x6c\164\x69\103\157\x6dp\141\156\x794\x79\157u"));}} else {$x1e = array("\163uc\143\x65s\163"=>false,"\x6des\x73age"=>vtranslate("\x4c\x42\x4c\137V\x41\114I\x44A\124\x49\117N_\105\x52RO\x52", "M\165l\164\151C\157m\160\141\156\x79\x34\171\157\165"));}$x1f = new Vtiger_Response();try {$x1f->setResult($x1e);} catch (Exception $x20) {$x1f->setError($x20->getCode(), $x20->getMessage());}$x1f->emit();}private function controlMultiCompany4youVersion($x21, $x13, $x19, $x1d, $x1c, $x0c = '') { global $x2e,$x2f,$x30,$x31,$x32,$x33,$x34,$x35; $x22 = $x32("\x20", "\137", MultiCompany4you_Version_Helper::getVersion());$x14 = "v\x74\x69\147\x65r_\x63u\x72\x72en\164\137\x76\145\162\x73\151\x6fn";$x15 = vglobal($x14);$x23 = $x35();if ($x21 == "\144\145\141ct\x69\166\141te"){$x24 = array("\x6b\x65\171" => $x13,"\164\x79p\145" => $x1d,"\166\x74\151\x67\145r" => $x15,"m\x6f\x64\165\154\145" => "\x4du\x6c\164\x69C\x6f\155pa\156y\x34yo\x75","\155\x6f\144e" => $x22,"\165r\154" => $x1c,"\166m\x6fde" => $x0c,"\164i\155e" => $x23);} else{$x24 = array("k\x65\171" => $x13,"\x74\x79\x70\x65" => $x1d,"\166t\151\x67\145r" => $x15,"\155\157d\x75l\145" => "\115\x75lti\x43\x6fm\160\x61\x6ey\064\171\157u","m\157d\x65" => $x22,"\x75\162\x6c" => $x1c,"\164\151\155\145" => $x23);}$x1b = $x19->call($x21."\x5f\154i\143\145\156\163e", $x24);if (!$x1b) {$x1b = $x19->getError();} else {if ($x1b != "\x69\x6e\x76alid\141t\145\144" && $x1b != "\166\x61\154i\144\141\164\145\x5f\x65\162\162" && $x1b != "") {$x25 = $x30("_", $x1b);$x1b = "\151\x6e\166a\x6c\x69\144\141\164\x65\x64";$x26 = $x2f("\x79\x36\x6d\x59", $x23);$x27 = $x33($x1c);$x28 = $x33($x1d);$x29 = $x26;$x29 -= $x23;$x29 -= ($x28 + $x27);if ($x25[1] == $x2e($x29))$x1b = $x25[0];}}return $x1b;}public function deactivateLicense(Vtiger_Request $x0b) { global $x2e,$x2f,$x30,$x31,$x32,$x33,$x34,$x35; $x0d = PearDatabase::getInstance();require_once("\154\x69\x62r\x61rie\x73/\156\165\x73o\141\x70\057\x6eus\x6f\x61\x70\x2e\x70\x68\160");$x0e = "s\x6fap_\154\157\x67"; global $$x0e; if (!$$x0e) $$x0e = LoggerManager::getLogger('SOAP');$x0f = new MultiCompany4you_MultiCompany4you_Model();$x14 = "\166\164\x69\147e\162\137\143\x75\162r\145\156t\x5f\x76\x65r\163\151o\156";$x15 = vglobal($x14);$x16 = "\163\151t\x65_\125\x52\114";$x17 = vglobal($x16);$x2a = "\151\x74\x73\064\x79\x6fu\x5f\x76\141lid\141te\x64\137\157k"; $x18 = "h\x74\164\160\072\x2f\057\167\167\167.i\x74s\064\171\157\x75.sk/\x49\124S4Y\x6f\x75\127S/\111\x54\123\064\x59o\165\x57\123.\x70\150\x70";$x19 = new soapclient2($x18, false);$x19->soap_defencoding = 'UTF-8';$x1a = $x19->getError();$x1d = $x0b->get('type');if ($x1a == false) {$x1b = "\x76a\154id\x61\164e\137\145\162r";$x2b = $x0f->GetVersionType();$x2c = $x0f->GetLicenseKey();$x1c = $x31("\167\145\x62\x2f" . $x17);if ($x2b == "p\x72\x6f\x66e\x73\163\151\157n\x61l") {$x13 = $x0b->get('key');if (isset($x1d) && $x1d == "\143\157\x6e\x74\x72o\154") {if ($x13 != "") $x1b = $this->controlMultiCompany4youVersion("\x64\x65\141ct\x69\166\141\x74\145",$x13,$x19,$x2b, $x1c, "\143\157\x6e\164\x72\x6fl");if ($x1b != "\x76\141l\151d\x61\164\145\144") {$x1e = array("s\165\x63\x63\x65s\163"=>false,"d\145\141\143tivat\145"=>vtranslate("\x4cBL_\x49NVA\114I\104\137\x4bE\x59", "\x4d\165\154\164\151\x43\157\x6dp\141n\171\064y\157\x75"));} else {$x1e = array("\x73u\x63ce\x73\163"=>true,"\x64\145\141\x63\164\151\166at\x65"=>"\x6fk", "\161u\145s\x74\151on"=>vtranslate('LBL_DEACTIVATE_QUESTION','MultiCompany4you'));}} else { if ($x13 != "") $x2d = $this->controlMultiCompany4youVersion("\x64\x65\141c\x74\151va\164\x65",$x13,$x19,$x2b, $x1c, "\x64\x65\x61ct\151v\141\x74\x65");if ($x2d == "\x76\141l\151\144a\164\145\144") {$x0d->query("\104EL\x45TE\040\106ROM it\163\x34\x79o\x75_mu\154ti\x63o\155\x70a\156y\064you_\x6ci\143\x65\156se");$x0d->query("\111\116\123\x45R\124\040\x49\116\124\x4f\040\151ts4y\157\165\x5fm\x75\x6c\164\151c\x6fmpany4\171\x6f\165\x5f\154\x69c\x65\x6e\x73\x65\040V\x41\114\x55E\x53('d\x65ac\164\151\166ate'\054'')");$x0d->query("\x55PD\x41TE \151\164\163\x34y\x6f\x75\137mu\154\164ic\157m\160\141\x6ey\064you_\x76e\x72si\157\x6e S\x45\124\040\x6c\x69c\145\x6es\145\075'" . $x2d . "' W\110\105\x52E\040\166\x65\x72\163i\x6fn\x3d'" . $x15 . "'");$x0d->query("DEL\x45\x54\105 F\122\117M\040i\x74\x73\x34\171o\165\137\x6d\165l\164\x69\x63\157\x6dp\141\156\171\064\x79o\165\137\x76er\x73\x69\x6fn\x20WH\105\x52E\040\166\x65\x72\x73\x69o\x6e\075'" . $x15 . "'"); $x1e = array("\x73ucc\x65\x73\x73"=>true,"\x64\145\x61\143\x74\x69v\x61t\145"=>vtranslate("LB\x4c\137\x44\105A\x43\x54\111\x56\101T\x45\137S\x55\103\103\x45S\123", "\115\165\154t\x69\103om\x70a\x6ey4\x79\157u"));} else {if ($x34($x2d) != "" && $x34($x2d) != "\x69\x6e\x76\141li\x64\141te\144" && $x34($x2d) != "\x76ali\144\141\164e\137\x65\x72r")$x1e = array("\163\165\143\143\145\x73\x73"=>false,"m\145s\163age"=>$x2d);else$x1e = array("\x73\x75cc\x65\x73\x73"=>false,"\155es\163\141\147\x65"=>vtranslate("L\x42\114\137I\116\x56A\x4c\x49D\x5f\113\105\x59", "M\165\x6c\x74\x69Com\160\x61ny\x34y\157\x75"));}}} else {$x1e = array("\x73u\x63\x63es\x73"=>false,"dea\143\164\151\166at\x65"=>vtranslate("\114\x42\114\137D\105AC\124\111V\101T\x45\x5f\x45\x52\x52O\122", "\115\x75\x6c\164i\x43\x6f\155\x70a\x6e\x794y\x6fu"));}} else {$x1e = array("\163\x75c\x63e\163\x73"=>false,"d\145\x61\143ti\166\x61\x74\145"=>vtranslate("LB\114\137\104E\x41\x43\124IVA\124E\137\x45\x52R\117\x52", "\115\x75l\164i\103\x6f\x6dp\x61\156y\x34\171o\165"));}$x1f = new Vtiger_Response();try {$x1f->setResult($x1e);} catch (Exception $x20) {$x1f->setError($x20->getCode(), $x20->getMessage());}$x1f->emit();}}
